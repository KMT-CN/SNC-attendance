<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>чн╛хИ░чн╛щААч│╗ч╗Я - чобчРЖщЭвцЭ┐</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="dashboard-container">
        <!-- хп╝шИкцаП -->
        <header class="header">
            <h1>чн╛хИ░чн╛щААчобчРЖч│╗ч╗Я</h1>
            <div class="user-info">
                <span id="username">чобчРЖхСШ</span>
                <button id="logoutBtn" class="btn btn-secondary">щААхЗ║чЩ╗х╜Х</button>
            </div>
        </header>

        <!-- ф╕╗хЖЕхо╣хМ║ -->
        <main class="main-content">
            <!-- ф╛зш╛╣цаП -->
            <aside class="sidebar">
                <nav class="nav-menu">
                    <a href="#" class="nav-item active" data-section="tables">чн╛хИ░шбичобчРЖ</a>
                    <a href="#" class="nav-item" data-section="members">цИРхСШчобчРЖ</a>
                    <a href="#" class="nav-item" data-section="records">чн╛хИ░шо░х╜Х</a>
                    <a href="#" class="nav-item" data-section="settings">ч│╗ч╗Яшо╛ч╜о</a>
                    <a href="#" class="nav-item" data-section="users" id="usersNavItem" style="display: none;">ЁЯСе чФицИ╖чобчРЖ</a>
                    <button id="startListeningBtn" class="btn btn-primary">х╝АхзЛшп╗хНб</button>
                </nav>
            </aside>

            <!-- хЖЕхо╣хМ║хЯЯ -->
            <div class="content-area">
                <!-- чн╛хИ░шбичобчРЖ -->
                <section id="tables" class="content-section active">
                    <div class="section-header">
                        <h2>чн╛хИ░шбичобчРЖ</h2>
                        <button class="btn btn-primary" id="createTableBtn">
                            <span>тЮХ</span> хИЫх╗║цЦ░чн╛хИ░шби
                        </button>
                    </div>

                    <div class="table-list">
                        <div class="card">
                            <h3>чн╛хИ░шбихИЧшби</h3>
                            <table class="data-table" id="tablesTable">
                                <thead>
                                    <tr>
                                        <th>шбица╝хРНчз░</th>
                                        <th>хИЫх╗║цЧ╢щЧ┤</th>
                                        <th>цИРхСШцХ░щЗП</th>
                                        <th>чК╢цАБ</th>
                                        <th>цУНф╜Ь</th>
                                    </tr>
                                </thead>
                                <tbody id="tablesTableBody">
                                    <!-- хКицАБхКаш╜╜ -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </section>

                <!-- цИРхСШчобчРЖ -->
                <section id="members" class="content-section">
                    <div class="section-header">
                        <h2>цИРхСШчобчРЖ</h2>
                        <button class="btn btn-primary" id="addMemberBtn">
                            <span>тЮХ</span> ц╖╗хКацИРхСШ
                        </button>
                    </div>

                    <div class="filter-bar">
                        <select id="tableFilter" class="form-select">
                            <option value="">щАЙцЛйчн╛хИ░шби</option>
                        </select>
                    </div>

                    <div class="members-list">
                        <div class="card">
                            <h3>цИРхСШхИЧшби</h3>
                            <table class="data-table" id="membersTable">
                                <thead>
                                    <tr>
                                        <th>
                                            <input type="checkbox" id="selectAll">
                                        </th>
                                        <th>хзУхРН</th>
                                        <th>хнжхП╖/х╖ехП╖</th>
                                        <th>шБФч│╗цЦ╣х╝П</th>
                                        <th>хНбчЙЗчК╢цАБ</th>
                                        <th>хКахЕецЧ╢щЧ┤</th>
                                        <th>цУНф╜Ь</th>
                                    </tr>
                                </thead>
                                <tbody id="membersTableBody">
                                    <!-- хКицАБхКаш╜╜ -->
                                </tbody>
                            </table>
                            <div class="batch-actions">
                                <button class="btn btn-danger" id="batchDeleteBtn">цЙ╣щЗПхИащЩд</button>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- чн╛хИ░шо░х╜Х -->
                <section id="records" class="content-section">
                    <div class="section-header">
                        <h2>чн╛хИ░шо░х╜Х</h2>
                        <button class="btn btn-primary" id="manualRecordBtn">
                            <span>тЮХ</span> цЙЛхКишо░х╜Х
                        </button>
                    </div>

                    <div class="filter-bar">
                        <select id="recordTableFilter" class="form-select">
                            <option value="">щАЙцЛйчн╛хИ░шби</option>
                        </select>
                        <input type="date" id="recordDateFilter" class="form-control" placeholder="чнЫщАЙцЧецЬЯ">
                        <button class="btn btn-secondary" id="clearFilterBtn">ц╕ЕщЩдчнЫщАЙ</button>
                    </div>

                    <div class="records-list">
                        <div class="card">
                            <h3>чн╛хИ░чн╛щААшо░х╜Х</h3>
                            <table class="data-table" id="recordsTable">
                                <thead>
                                    <tr>
                                        <th>хзУхРН</th>
                                        <th>хнжхП╖/х╖ехП╖</th>
                                        <th>чн╛хИ░цЧецЬЯ</th>
                                        <th>чн╛хИ░цЧ╢щЧ┤</th>
                                        <th>чн╛щААцЧецЬЯ</th>
                                        <th>чн╛щААцЧ╢щЧ┤</th>
                                        <th>чК╢цАБ</th>
                                        <th>цУНф╜Ь</th>
                                    </tr>
                                </thead>
                                <tbody id="recordsTableBody">
                                    <!-- хКицАБхКаш╜╜ -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </section>

                <!-- ч│╗ч╗Яшо╛ч╜о -->
                <section id="settings" class="content-section">
                    <div class="section-header">
                        <h2>ч│╗ч╗Яшо╛ч╜о</h2>
                    </div>

                    <div class="settings-container">
                        <!-- х╜УхЙНц┤╗хКишбица╝шо╛ч╜о -->
                        <div class="card">
                            <h3>х╜УхЙНц┤╗хКишбица╝</h3>
                            <div class="form-group">
                                <label for="activeTable">щАЙцЛйх╜УхЙНчн╛хИ░/чн╛щААчЪДчЫоцаЗшбица╝</label>
                                <select id="activeTable" class="form-select">
                                    <option value="">шп╖щАЙцЛйшбица╝</option>
                                </select>
                                <button class="btn btn-primary" id="setActiveTableBtn">шо╛ч╜оф╕║ц┤╗хКишбица╝</button>
                            </div>
                            <div class="current-active" id="currentActiveDisplay">
                                <strong>х╜УхЙНц┤╗хКишбица╝я╝Ъ</strong><span id="activeTableName">цЬкшо╛ч╜о</span>
                            </div>
                        </div>

                        <!-- чн╛хИ░/чн╛щААцибх╝Пшо╛ч╜о -->
                        <div class="card">
                            <h3>чн╛хИ░/чн╛щААцибх╝П</h3>
                            <div class="mode-selector">
                                <div class="form-group">
                                    <label>
                                        <input type="radio" name="mode" value="checkin" checked>
                                        <span class="mode-label">
                                            <strong>чн╛хИ░цибх╝П</strong>
                                            <small>чФиф║Ошо░х╜Хчн╛хИ░цЧ╢щЧ┤</small>
                                        </span>
                                    </label>
                                </div>
                                <div class="form-group">
                                    <label>
                                        <input type="radio" name="mode" value="checkout">
                                        <span class="mode-label">
                                            <strong>чн╛щААцибх╝П</strong>
                                            <small>чФиф║Ошо░х╜Хчн╛щААцЧ╢щЧ┤</small>
                                        </span>
                                    </label>
                                </div>
                                <button class="btn btn-primary" id="setModeBtn">х║ФчФишо╛ч╜о</button>
                            </div>
                            <div class="current-mode" id="currentModeDisplay">
                                <strong>х╜УхЙНцибх╝Пя╝Ъ</strong><span id="modeName">чн╛хИ░цибх╝П</span>
                            </div>
                        </div>

                        <!-- хп╝хЗ║шо╛ч╜о -->
                        <div class="card">
                            <h3>цХ░цНохп╝хЗ║</h3>
                            <div class="form-group">
                                <label for="exportTable">щАЙцЛйшжБхп╝хЗ║чЪДшбица╝</label>
                                <select id="exportTable" class="form-select">
                                    <option value="">шп╖щАЙцЛйшбица╝</option>
                                </select>
                            </div>
                            <div class="export-options">
                                <button class="btn btn-success" id="exportExcelBtn">
                                    <span>ЁЯУК</span> хп╝хЗ║ф╕║ Excel
                                </button>
                                <button class="btn btn-success" id="exportCsvBtn">
                                    <span>ЁЯУД</span> хп╝хЗ║ф╕║ CSV
                                </button>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- чФицИ╖чобчРЖ -->
                <section id="users" class="content-section">
                    <div class="section-header">
                        <h2>чФицИ╖чобчРЖ</h2>
                        <button class="btn btn-primary" id="addUserBtn">
                            <span>тЮХ</span> ц╖╗хКачФицИ╖
                        </button>
                    </div>

                    <div class="users-list">
                        <div class="card">
                            <h3>чФицИ╖хИЧшби</h3>
                            <table class="data-table" id="usersTable">
                                <thead>
                                    <tr>
                                        <th>чФицИ╖хРН</th>
                                        <th>шзТшЙ▓</th>
                                        <th>хИЫх╗║цЧ╢щЧ┤</th>
                                        <th>цЬАхРОцЫ┤цЦ░</th>
                                        <th>цУНф╜Ь</th>
                                    </tr>
                                </thead>
                                <tbody id="usersTableBody">
                                    <!-- хКицАБхКаш╜╜ -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </section>
            </div>
        </main>
    </div>

    <!-- хИЫх╗║чн╛хИ░шбицибцАБцбЖ -->
    <div id="createTableModal" class="modal" style="display:none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>хИЫх╗║цЦ░чн╛хИ░шби</h3>
                <span class="close" data-modal="createTableModal">&times;</span>
            </div>
            <div class="modal-body">
                <form id="createTableForm">
                    <div class="form-group">
                        <label for="tableName">шбица╝хРНчз░ *</label>
                        <input type="text" id="tableName" name="tableName" required placeholder="ф╛ЛхжВя╝Ъ2025х╣┤10цЬИчн╛хИ░шби">
                    </div>
                    <div class="form-group">
                        <label for="tableDescription">шбица╝цППш┐░</label>
                        <textarea id="tableDescription" name="tableDescription" rows="3" placeholder="щАЙхбл"></textarea>
                    </div>
                    <div class="modal-actions">
                        <button type="button" class="btn btn-secondary" data-modal="createTableModal">хПЦц╢И</button>
                        <button type="submit" class="btn btn-primary">хИЫх╗║</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- ц╖╗хКацИРхСШцибцАБцбЖ -->
    <div id="addMemberModal" class="modal" style="display:none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>ц╖╗хКацИРхСШ</h3>
                <span class="close" data-modal="addMemberModal">&times;</span>
            </div>
            <div class="modal-body">
                <form id="addMemberForm">
                    <div class="form-group">
                        <label for="memberTable">щАЙцЛйчн╛хИ░шби *</label>
                        <select id="memberTable" name="memberTable" class="form-select" required>
                            <option value="">шп╖щАЙцЛй</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="memberName">хзУхРН *</label>
                        <input type="text" id="memberName" name="memberName" required placeholder="шп╖ш╛УхЕехзУхРН">
                    </div>
                    <div class="form-group">
                        <label for="memberId">хнжхП╖/х╖ехП╖ *</label>
                        <input type="text" id="memberId" name="memberId" required placeholder="шп╖ш╛УхЕехнжхП╖цИЦх╖ехП╖">
                    </div>
                    <div class="form-group">
                        <label for="memberContact">шБФч│╗цЦ╣х╝П</label>
                        <input type="text" id="memberContact" name="memberContact" placeholder="щАЙхбл">
                    </div>
                    <div class="modal-actions">
                        <button type="button" class="btn btn-secondary" data-modal="addMemberModal">хПЦц╢И</button>
                        <button type="submit" class="btn btn-primary">ц╖╗хКа</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- чбошодхИащЩдцибцАБцбЖ -->
    <div id="confirmModal" class="modal" style="display:none;">
        <div class="modal-content modal-sm">
            <div class="modal-header">
                <h3>чбошодцУНф╜Ь</h3>
                <span class="close" data-modal="confirmModal">&times;</span>
            </div>
            <div class="modal-body">
                <p id="confirmMessage">чбохоЪшжБцЙзшбМцндцУНф╜ЬхРЧя╝Я</p>
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" data-modal="confirmModal">хПЦц╢И</button>
                    <button type="button" class="btn btn-danger" id="confirmBtn">чбохоЪ</button>
                </div>
            </div>
        </div>
    </div>

    <!-- цЙЛхКишо░х╜Хчн╛хИ░/чн╛щААцибцАБцбЖ -->
    <div id="manualRecordModal" class="modal" style="display:none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>цЙЛхКишо░х╜Хчн╛хИ░/чн╛щАА</h3>
                <span class="close" data-modal="manualRecordModal">&times;</span>
            </div>
            <div class="modal-body">
                <form id="manualRecordForm">
                    <div class="form-group">
                        <label for="recordTable">щАЙцЛйчн╛хИ░шби *</label>
                        <select id="recordTable" name="recordTable" class="form-select" required>
                            <option value="">шп╖щАЙцЛй</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="recordMember">щАЙцЛйцИРхСШ *</label>
                        <select id="recordMember" name="recordMember" class="form-select" required>
                            <option value="">шп╖хЕИщАЙцЛйчн╛хИ░шби</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="recordType">шо░х╜Хч▒╗хЮЛ *</label>
                        <select id="recordType" name="recordType" class="form-select" required>
                            <option value="checkin">чн╛хИ░</option>
                            <option value="checkout">чн╛щАА</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="recordDate">цЧецЬЯ *</label>
                        <input type="date" id="recordDate" name="recordDate" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="recordTime">цЧ╢щЧ┤ *</label>
                        <input type="time" id="recordTime" name="recordTime" class="form-control" required>
                    </div>
                    <div class="modal-actions">
                        <button type="button" class="btn btn-secondary" data-modal="manualRecordModal">хПЦц╢И</button>
                        <button type="submit" class="btn btn-primary">ф┐ЭхнШшо░х╜Х</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- ч╗СхоЪхНбчЙЗцибцАБцбЖ -->
    <div id="bindCardModal" class="modal" style="display:none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>ч╗СхоЪхНбчЙЗ</h3>
                <span class="close" data-modal="bindCardModal">&times;</span>
            </div>
            <div class="modal-body">
                <form id="bindCardForm">
                    <input type="hidden" id="bindMemberId" name="bindMemberId">
                    <div class="form-group">
                        <label for="bindMemberName">цИРхСШхзУхРН</label>
                        <input type="text" id="bindMemberName" class="form-control" readonly>
                    </div>
                    <div class="form-group">
                        <label for="bindMemberEmployeeId">хнжхП╖/х╖ехП╖</label>
                        <input type="text" id="bindMemberEmployeeId" class="form-control" readonly>
                    </div>
                    <div class="form-group">
                        <label for="cardId">хНбчЙЗID *</label>
                        <input type="text" id="cardId" name="cardId" class="form-control" required 
                               placeholder="шп╖ш╛УхЕехНбчЙЗIDцИЦхИ╖хНбшп╗хПЦ">
                        <small style="color: #6c757d;">цПРчд║я╝ЪхПпф╗ехЬишп╗хНбхЩищб╡щЭвшО╖хПЦхНбчЙЗID</small>
                    </div>
                    <div class="modal-actions">
                        <button type="button" class="btn btn-secondary" data-modal="bindCardModal">хПЦц╢И</button>
                        <button type="submit" class="btn btn-primary">ч╗СхоЪ</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- ц╖╗хКачФицИ╖цибцАБцбЖ -->
    <div id="addUserModal" class="modal" style="display:none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>ц╖╗хКачФицИ╖</h3>
                <span class="close" data-modal="addUserModal">&times;</span>
            </div>
            <div class="modal-body">
                <form id="addUserForm">
                    <div class="form-group">
                        <label for="newUsername">чФицИ╖хРН *</label>
                        <input type="text" id="newUsername" name="newUsername" class="form-control" required 
                               placeholder="шп╖ш╛УхЕечФицИ╖хРН">
                    </div>
                    <div class="form-group">
                        <label for="newPassword">хпЖчаБ *</label>
                        <input type="password" id="newPassword" name="newPassword" class="form-control" required 
                               placeholder="шЗ│х░С6ф╕кхнЧчмж" minlength="6">
                    </div>
                    <div class="form-group">
                        <label for="newUserRole">шзТшЙ▓ *</label>
                        <select id="newUserRole" name="newUserRole" class="form-select" required>
                            <option value="user">цЩощАЪчФицИ╖</option>
                            <option value="admin">чобчРЖхСШ</option>
                        </select>
                        <small style="color: #6c757d;">цПРчд║я╝Ъш╢Еч║зчобчРЖхСШхПкшГ╜чФ▒щжЦцмбц│ихЖМчФицИ╖шО╖х╛Ч</small>
                    </div>
                    <div class="modal-actions">
                        <button type="button" class="btn btn-secondary" data-modal="addUserModal">хПЦц╢И</button>
                        <button type="submit" class="btn btn-primary">ц╖╗хКа</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- ч╝Цш╛СчФицИ╖цибцАБцбЖ -->
    <div id="editUserModal" class="modal" style="display:none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>ч╝Цш╛СчФицИ╖</h3>
                <span class="close" data-modal="editUserModal">&times;</span>
            </div>
            <div class="modal-body">
                <form id="editUserForm">
                    <input type="hidden" id="editUserId" name="editUserId">
                    <div class="form-group">
                        <label for="editUsername">чФицИ╖хРН *</label>
                        <input type="text" id="editUsername" name="editUsername" class="form-control" required 
                               placeholder="шп╖ш╛УхЕечФицИ╖хРН">
                    </div>
                    <div class="form-group">
                        <label for="editUserRole">шзТшЙ▓ *</label>
                        <select id="editUserRole" name="editUserRole" class="form-select" required>
                            <option value="user">цЩощАЪчФицИ╖</option>
                            <option value="admin">чобчРЖхСШ</option>
                        </select>
                    </div>
                    <div class="modal-actions">
                        <button type="button" class="btn btn-secondary" data-modal="editUserModal">хПЦц╢И</button>
                        <button type="submit" class="btn btn-primary">ф┐ЭхнШ</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- ф┐оцФ╣хпЖчаБцибцАБцбЖ -->
    <div id="changePasswordModal" class="modal" style="display:none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>ф┐оцФ╣хпЖчаБ</h3>
                <span class="close" data-modal="changePasswordModal">&times;</span>
            </div>
            <div class="modal-body">
                <form id="changePasswordForm">
                    <input type="hidden" id="changePasswordUserId" name="changePasswordUserId">
                    <div class="form-group">
                        <label for="changePasswordUsername">чФицИ╖хРН</label>
                        <input type="text" id="changePasswordUsername" class="form-control" readonly>
                    </div>
                    <div class="form-group">
                        <label for="newUserPassword">цЦ░хпЖчаБ *</label>
                        <input type="password" id="newUserPassword" name="newUserPassword" class="form-control" required 
                               placeholder="шЗ│х░С6ф╕кхнЧчмж" minlength="6">
                    </div>
                    <div class="form-group">
                        <label for="confirmUserPassword">чбошодхпЖчаБ *</label>
                        <input type="password" id="confirmUserPassword" name="confirmUserPassword" class="form-control" required 
                               placeholder="шп╖хЖНцмбш╛УхЕехпЖчаБ" minlength="6">
                    </div>
                    <div class="modal-actions">
                        <button type="button" class="btn btn-secondary" data-modal="changePasswordModal">хПЦц╢И</button>
                        <button type="submit" class="btn btn-primary">ф┐оцФ╣хпЖчаБ</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script src="js/api.js"></script>
    <script src="js/dashboard.js"></script>
</body>
</html>
