# Bug ä¿®å¤è¯´æ˜ - v1.0.3

## ğŸ› é—®é¢˜æè¿°

åœ¨ä½¿ç”¨ `deploy/docker-compose.yml` ä¸€é”®éƒ¨ç½²æ—¶,é¦–æ¬¡ç™»å½•æ— æ³•è¿›å…¥æ³¨å†Œç•Œé¢çš„ bug ä¾ç„¶å­˜åœ¨,ä½†åˆ†åˆ«ä½¿ç”¨å‰åç«¯çš„ docker-compose éƒ¨ç½²åˆ™æ­£å¸¸ã€‚

## ğŸ” æ ¹æœ¬åŸå› 

å‰ç«¯çš„ API é…ç½® (`Frontend/js/api.js`) ç¡¬ç¼–ç ä¸º `http://127.0.0.1:10234/api`,å¯¼è‡´:

1. **å‰åç«¯åˆ†åˆ«éƒ¨ç½²æ—¶**:
   - å‰ç«¯åœ¨å®¿ä¸»æœºä¸Šè¿è¡Œ(æˆ–åœ¨ç‹¬ç«‹å®¹å™¨ä¸­ä½†ç«¯å£æ˜ å°„åˆ°å®¿ä¸»æœº)
   - æµè§ˆå™¨é€šè¿‡ `127.0.0.1:10234` è®¿é—®å®¿ä¸»æœºçš„åç«¯ç«¯å£ âœ… **æ­£å¸¸å·¥ä½œ**

2. **ä½¿ç”¨ deploy ç»Ÿä¸€éƒ¨ç½²æ—¶**:
   - å‰ç«¯è¿è¡Œåœ¨ Docker å®¹å™¨å†…
   - å®¹å™¨å†…çš„ `127.0.0.1` æŒ‡å‘**å‰ç«¯å®¹å™¨è‡ªå·±**,è€Œä¸æ˜¯åç«¯å®¹å™¨
   - å‰ç«¯æ— æ³•é€šè¿‡å®¹å™¨å†…ç½‘ç»œè®¿é—®åç«¯ âŒ **æ— æ³•å·¥ä½œ**

## âœ… è§£å†³æ–¹æ¡ˆ

### 1. ä¿®æ”¹å‰ç«¯ Nginx é…ç½® (Frontend/nginx.conf)

æ·»åŠ åå‘ä»£ç†é…ç½®,å°† `/api/` è·¯å¾„ä»£ç†åˆ°åç«¯å®¹å™¨:

```nginx
# API åå‘ä»£ç†åˆ°åç«¯
location /api/ {
    proxy_pass http://backend:10234/api/;
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection 'upgrade';
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto $scheme;
    proxy_cache_bypass $http_upgrade;
    proxy_connect_timeout 300s;
    proxy_send_timeout 300s;
    proxy_read_timeout 300s;
}
```

### 2. ä¿®æ”¹å‰ç«¯ API é…ç½® (Frontend/js/api.js)

å°† API åŸºç¡€ URL æ”¹ä¸ºç›¸å¯¹è·¯å¾„:

```javascript
// ä¿®æ”¹å‰
BASE_URL: 'http://127.0.0.1:10234/api',

// ä¿®æ”¹å
BASE_URL: '/api',
```

è¿™æ ·æµè§ˆå™¨ä¼šä½¿ç”¨ç›¸å¯¹è·¯å¾„è®¿é—® API,Nginx ä¼šè‡ªåŠ¨å°†è¯·æ±‚ä»£ç†åˆ°åç«¯å®¹å™¨ã€‚

## ğŸ“‹ éƒ¨ç½²å»ºè®®

### Docker Compose ç»Ÿä¸€éƒ¨ç½²(æ¨è)

ä½¿ç”¨ `deploy/docker-compose.yml`:

```bash
cd deploy
docker-compose pull  # æ‹‰å–æœ€æ–°é•œåƒ
docker-compose up -d
```

è®¿é—®: http://localhost:8080

### å‰åç«¯åˆ†åˆ«éƒ¨ç½²

å¦‚æœéœ€è¦åˆ†åˆ«éƒ¨ç½²,éœ€è¦ä¿®æ”¹å‰ç«¯ API é…ç½®:

```javascript
// Frontend/js/api.js
BASE_URL: 'http://127.0.0.1:10234/api',  // æˆ–å®é™…çš„åç«¯åœ°å€
```

ç„¶åé‡æ–°æ„å»ºå‰ç«¯é•œåƒ:

```bash
cd Frontend
docker-compose build
docker-compose up -d
```

## ğŸ§ª æµ‹è¯•éªŒè¯

1. æ¸…ç©ºæµè§ˆå™¨ç¼“å­˜
2. è®¿é—® http://localhost:8080
3. å¦‚æœæ˜¯é¦–æ¬¡ä½¿ç”¨(æ— ç”¨æˆ·),åº”è‡ªåŠ¨æ˜¾ç¤ºæ³¨å†Œè¡¨å•
4. å¡«å†™è¡¨å•,åˆ›å»ºè¶…çº§ç®¡ç†å‘˜è´¦æˆ·
5. åº”èƒ½æˆåŠŸæ³¨å†Œå¹¶è‡ªåŠ¨ç™»å½•

## ğŸ“ æŠ€æœ¯è¦ç‚¹

- Docker å®¹å™¨é—´é€šä¿¡ä½¿ç”¨æœåŠ¡åç§°(å¦‚ `backend`)è€Œé `127.0.0.1`
- Nginx åå‘ä»£ç†å¯ä»¥è§£å†³å®¹å™¨å†…ç½‘ç»œè®¿é—®é—®é¢˜
- ç›¸å¯¹è·¯å¾„ API é…ç½®æ›´é€‚åˆå®¹å™¨åŒ–éƒ¨ç½²
- Docker Compose ä¸­çš„ `depends_on` ç¡®ä¿æœåŠ¡å¯åŠ¨é¡ºåº

## ğŸ”„ ç‰ˆæœ¬å†å²

- **v1.0.1**: ä¿®å¤äº†é¦–æ¬¡ç™»å½•é€»è¾‘,ä½†ä»…åœ¨å‰åç«¯åˆ†åˆ«éƒ¨ç½²æ—¶ç”Ÿæ•ˆ
- **v1.0.2**: ä¿®å¤äº†éƒ¨åˆ†é—®é¢˜
- **v1.0.3**: å®Œæ•´ä¿®å¤,æ”¯æŒ Docker Compose ç»Ÿä¸€éƒ¨ç½²,æ·»åŠ  Nginx åå‘ä»£ç†

---

**ä¿®å¤æ—¥æœŸ**: 2025å¹´11æœˆ4æ—¥  
**å½±å“ç‰ˆæœ¬**: v1.0.0 - v1.0.2  
**ä¿®å¤ç‰ˆæœ¬**: v1.0.3+
